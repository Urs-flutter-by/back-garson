# Сводка рефакторинга (Часть 10): Проектирование и реализация схемы БД

### Цель
Создать и применить изменения в схеме базы данных для поддержки мульти-арендности, подписок, ролей и прав доступа (RBAC), а также для детального отслеживания жизненного цикла заказов.

### Что сделано
1.  **Созданы новые таблицы:**
    - `accounts`: для управления аккаунтами клиентов (владельцами).
    - `subscriptions`: для тарифных планов и лимитов.
    - `roles`: справочник ролей (`SUPER_ADMIN`, `ADMIN_RESTAURANT`, `WAITER`, `CHEF`).
    - `permissions`: справочник всех возможных действий в системе.
    - `role_permissions`: связующая таблица для назначения прав ролям.
    - `users`: единая таблица для всех сотрудников.
    - `order_status_history`: для логирования всех изменений статуса заказа.

2.  **Модифицированы существующие таблицы:**
    - `restaurants`: добавлена колонка `account_id` для привязки к владельцу.
    - `orders`: добавлены колонки `status`, `waiter_id`, `chef_id`.

3.  **Созданы миграционные скрипты:**
    - В папке `/migrations` созданы последовательные SQL-файлы (`001`-`004`) для применения всех изменений к схеме и переноса данных из старой таблицы `waiters`.

### Результат
База данных полностью готова к поддержке новой бизнес-логики. Архитектура БД стала масштабируемой, безопасной и готовой к сбору данных для будущей аналитики.
