## üõ†Ô∏è –°–≤–æ–¥–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–ß–∞—Å—Ç—å 8): –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª

–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å, –Ω–æ –∏ –≤ —Ñ–∞–π–ª. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1.  **–ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π–ª–æ–≤—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤:**
    - –í —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º `middleware` (`routes/_middleware.dart`) –±—ã–ª–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_configureLogger`.
    - –¢–µ–ø–µ—Ä—å, –ø–æ–º–∏–º–æ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å, –≤—Å–µ –ª–æ–≥–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª `log/app.log`.
    - –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dart:io` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª –≤ —Ä–µ–∂–∏–º–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (`FileMode.append`).

2.  **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
    - –í—Å—è –ª–æ–≥–∏–∫–∞ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞–ª–∞—Å—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –µ—ë –¥–∞–ª—å–Ω–µ–π—à–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.
    - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è `StreamSubscription`, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è `Logger.root` –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –æ–±–∞ –ø–æ—Ç–æ–∫–∞: –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª.

### –ü—Ä–∏–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `routes/_middleware.dart`:

```dart
import 'dart:io';

// ... –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã

void _configureLogger() {
  hierarchicalLoggingEnabled = true;
  Logger.root.level = Level.ALL;

  final logFile = File('log/app.log');
  final fileSink = logFile.openWrite(mode: FileMode.append);

  Logger.root.onRecord.listen((record) {
    final message = '${record.time}: ${record.level.name}: ${record.loggerName}: '
        '${record.message}';

    // –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
    print(message);
    // –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª
    fileSink.writeln(message);

    if (record.error != null) {
      final errorMessage = '  Error: ${record.error}';
      print(errorMessage);
      fileSink.writeln(errorMessage);
    }
    if (record.stackTrace != null) {
      final stackTraceMessage = '  Stack Trace: ${record.stackTrace}';
      print(stackTraceMessage);
      fileSink.writeln(stackTraceMessage);
    }
  });
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤ –ª–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –±—ã–ª —É—Ç–µ—Ä—è–Ω.
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:** –ó–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–æ—â–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞—É–¥–∏—Ç.
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
